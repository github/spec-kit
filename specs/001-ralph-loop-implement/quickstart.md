# Quickstart: Ralph Loop Implementation

**Feature**: 001-ralph-loop-implement  
**Date**: 2026-01-18

## Prerequisites

Before using the ralph loop, ensure you have:

1. **Completed Spec-Driven Development phases**:
   - `spec.md` - Feature specification
   - `plan.md` - Implementation plan
   - `tasks.md` - Task breakdown (generated by `/speckit.tasks`)

2. **GitHub Copilot CLI** (standalone tool, NOT `gh copilot`):
   ```bash
   # Windows
   winget install GitHub.Copilot
   
   # macOS/Linux (Homebrew)
   brew install copilot-cli
   
   # All platforms (requires Node.js 22+)
   npm install -g @github/copilot
   
   # Verify installation
   copilot --version
   ```

3. **Authentication** (one of these methods):
   ```bash
   # Interactive login (first time)
   copilot
   # Then use /login command when prompted
   
   # OR set environment variable with PAT (for automation)
   # Create PAT at https://github.com/settings/personal-access-tokens/new
   # with "Copilot Requests" permission
   export GH_TOKEN=your_token_here  # Linux/macOS
   $env:GH_TOKEN = "your_token_here"  # PowerShell
   ```

4. **Active Copilot subscription**: Copilot Pro, Pro+, Business, or Enterprise

5. **Git repository**: Ralph loop tracks changes via git commits

## Usage

### Basic Usage

```bash
# From your project root, on a feature branch
specify ralph
```

This will:
1. Validate prerequisites (tasks.md exists, Copilot CLI available)
2. Load the `speckit.implement` agent profile for proper SDD context
3. Start the loop with default 10 iterations
4. Process tasks sequentially until complete or limit reached

### With Custom Iteration Limit

```bash
# Run up to 20 iterations
specify ralph --max-iterations 20

# Run only 3 iterations (for testing)
specify ralph --max-iterations 3
```

### With Custom Model

```bash
# Use a specific AI model
specify ralph --model gpt-5.1

# Available models: claude-sonnet-4.5 (default), claude-haiku-4.5, 
#   claude-opus-4.5, gpt-5.2-codex, gpt-5.1, gemini-3-pro-preview, etc.
```

### Resuming a Partial Run

If the loop was interrupted or reached its limit with tasks remaining:

```bash
# Simply run again - it picks up where it left off
specify ralph
```

The loop reads `progress.txt` and `tasks.md` to determine which tasks are complete.

## What Happens During Execution

```
═══════════════════════════════════════════════════════════
  Ralph Loop - 001-ralph-loop-implement
═══════════════════════════════════════════════════════════

Iteration 1 of 10
  Task: T001 Create project structure
  Status: ✅ Completed
  
Iteration 2 of 10
  Task: T002 Initialize dependencies
  Status: ✅ Completed

Iteration 3 of 10
  Task: T003 Configure linting
  Status: ❌ Failed (will retry)

Iteration 4 of 10
  Task: T003 Configure linting
  Status: ✅ Completed

...

Ralph completed all tasks!
Total iterations: 7
Tasks completed: 6
Duration: 12m 34s
```

## Output Files

After running, check these files:

| File | Purpose |
|------|---------|
| `specs/{feature}/progress.txt` | Detailed log of each iteration |
| `specs/{feature}/tasks.md` | Updated checkboxes showing completion |
| Git history | Commits from each successful iteration |

## Troubleshooting

### "tasks.md not found"

Run `/speckit.tasks` first to generate the task breakdown.

### "copilot: command not found"

Install the Copilot CLI (see Prerequisites above). Note this is NOT `gh copilot`:
```bash
# Windows
winget install GitHub.Copilot

# macOS/Linux
brew install copilot-cli
```

### "Authentication required"

Set up authentication:
```bash
# Option 1: Interactive login
copilot
# Use /login command when prompted

# Option 2: Environment variable (for automation)
export GH_TOKEN=your_pat_with_copilot_requests_permission
```

### "Copilot subscription required"

Ensure you have an active Copilot Pro, Pro+, Business, or Enterprise subscription.
If using via organization, your admin must enable the CLI policy in settings.

### Task keeps failing

If a task fails 3 times consecutively, the loop skips it and moves on. Check `progress.txt` for error details, fix manually, then re-run.

### Loop completes but tasks remain

Check if tasks are appropriately sized. Ralph works best with small, focused tasks that can be completed in a single context. Consider breaking large tasks into smaller ones.

## Best Practices

1. **Right-size your tasks**: Each task should be completable in 5-15 minutes of agent work
2. **Review progress.txt**: Check the Codebase Patterns section for discovered conventions
3. **Commit frequently**: The agent commits after each successful task
4. **Monitor early iterations**: Watch the first 2-3 iterations to ensure the agent understands the codebase
5. **Use with tests**: Having tests helps the agent verify its work

## Example Workflow

```bash
# 1. Create feature specification
/speckit.specify "Add user authentication"

# 2. Create implementation plan
/speckit.plan

# 3. Generate tasks
/speckit.tasks

# 4. Run ralph loop
specify ralph

# 5. Review and merge
git log --oneline  # See commits from ralph
cat specs/001-auth/progress.txt  # See detailed progress
```

## Stopping the Loop

Press `Ctrl+C` to interrupt the loop. Progress is preserved - you can resume later.

## Limitations

- **MVP supports Copilot CLI only**: Other agents (Claude Code, Gemini) coming in future releases
- **Requires CLI authentication**: IDE-based Copilot not supported for ralph loop
- **Single task per iteration**: Designed for focused, incremental progress
- **No parallel execution**: Tasks run sequentially to maintain context coherence
- **Requires Copilot subscription**: Pro, Pro+, Business, or Enterprise required
