name: api
version: 2.0.1
description: |
  REST API contract validation guards using pytest and schema validation.
  Generates comprehensive API test files with request/response validation, 
  schema checking, and performance assertions.
category: integration
author: Spec Kit Core Team
license: MIT
scaffolder_class: APIScaffolder

dependencies:
  runtime:
    - python: ">=3.11"
  packages:
    - pytest: ">=7.0"
    - requests: ">=2.31"
    - jsonschema: ">=4.0"

compatibility:
  languages: [python]
  frameworks: [fastapi, flask, django]

scaffolding:
  creates:
    - tests/api/guards/{guard_id}_{name}.py
    - tests/api/guards/schemas/{guard_id}_{name}_schema.json
  updates:
    - Makefile

execution:
  command: "pytest tests/api/guards/{guard_id}_{name}.py -v"
  timeout: 120
  exit_codes:
    success: 0
    failure: 1

ai_hints:
  when_to_use: |
    Use this guard type when validating HTTP API endpoints and contracts.
    Ideal for testing REST APIs, GraphQL endpoints, and HTTP services.
    Validates request/response schemas, status codes, headers, and performance.
  boilerplate_explanation: |
    Generates a pytest test file with:
    - HTTP request/response test structure
    - JSON schema validation against defined contracts
    - Status code and header assertions
    - Response time performance checks
    - Example tests for GET, POST, PUT, DELETE operations
    - JSON schema file with example OpenAPI-compatible schemas
    - TODO comments guiding AI agent where to add endpoint-specific tests
