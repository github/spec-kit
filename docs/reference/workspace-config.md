# Workspace Configuration Reference

Configuration for multi-repository workspaces.

## Workspace Configuration File

**Location**: `<workspace-root>/.specify/workspace.yml`

## Structure

```yaml
workspace:
  name: my-workspace
  root: /absolute/path/to/workspace
  version: 1.0.0

repos:
  - name: backend-service
    path: ./backend
    aliases: [backend, api]
    github_host: github.com
    require_jira: false

  - name: frontend-app
    path: ./frontend
    aliases: [frontend, ui]
    github_host: github.com
    require_jira: false

conventions:
  prefix_rules:
    backend-: [backend-service]
    frontend-: [frontend-app]
    fullstack-: [backend-service, frontend-app]

  suffix_rules:
    -api: [backend-service]
    -ui: [frontend-app]

  defaults:
    ambiguous_prompt: true
    default_repo: null
```

## Fields

### Workspace Section

- `name` - Workspace identifier
- `root` - Absolute path to workspace directory
- `version` - Configuration version

### Repos Section

Array of repository configurations:

- `name` - Repository name (unique)
- `path` - Relative or absolute path to repository
- `aliases` - Alternative names for this repo
- `github_host` - GitHub hostname (e.g., `github.com`, `github.enterprise.com`)
- `require_jira` - Whether Jira keys required in branch names

### Conventions Section

**Prefix Rules**: Match spec name prefix to target repos
```yaml
backend-: [backend-service]
```
Spec `backend-auth` → routes to `backend-service`

**Suffix Rules**: Match spec name suffix to target repos
```yaml
-api: [backend-service]
```
Spec `payment-api` → routes to `backend-service`

**Defaults**:
- `ambiguous_prompt` - Prompt user if routing is ambiguous
- `default_repo` - Default repo if no match (null = prompt)

## Auto-Detection

When initializing workspace with `specify init --workspace`, the configuration is auto-generated by:
1. Discovering all git repositories
2. Inferring aliases from repo names
3. Detecting GitHub host from remote URLs
4. Determining Jira requirements based on host

## Customization

Edit `.specify/workspace.yml` to:
- Add custom routing rules
- Define additional aliases
- Configure Jira requirements
- Set default routing behavior

## Example Configurations

### Simple Frontend + Backend
```yaml
conventions:
  prefix_rules:
    backend-: [my-backend]
    frontend-: [my-frontend]
    fullstack-: [my-backend, my-frontend]
```

### Microservices
```yaml
conventions:
  prefix_rules:
    auth-: [auth-service]
    payment-: [payment-service]
    user-: [user-service]
    notification-: [notification-service]

  suffix_rules:
    -api: [gateway-service]
    -worker: [worker-service]
```

### Mixed Enterprise/Public
```yaml
repos:
  - name: enterprise-backend
    github_host: github.enterprise.com
    require_jira: true

  - name: public-sdk
    github_host: github.com
    require_jira: false
```

## Related

- [Guides: Multi-Repo Workspaces](../guides/multi-repo-workspaces.md) - Setup and workflows
- [Concepts: Multi-Repo Architecture](../concepts/multi-repo-architecture.md) - Understanding the pattern
- [Configuration](./configuration.md) - Single-repo configuration
