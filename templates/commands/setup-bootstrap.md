---
description: Initialize project foundation - constitution, /docs structure, and pattern extraction
semantic_anchors:
  - Domain-Driven Design     # Bounded contexts, ubiquitous language
  - Living Documentation     # Docs evolve with the codebase
  - Code Archaeology         # Understanding existing systems through analysis
---

## User Input

```text
$ARGUMENTS
```

You **MUST** consider the user input before proceeding (if not empty).
Options: `--skip-constitution`, `--skip-learn`, `from-code`, `from-docs`, `from-specs`

## Purpose

Initialize the project foundation in 3 steps:
1. **Constitution**: Create `/memory/constitution.md` (project principles)
2. **Bootstrap**: Initialize `/docs/{domain}/` (documentation structure)
3. **Learn**: Extract patterns + create module CLAUDE.md files

---

## Step 1: Constitution

### 1.1 Check if constitution exists

```bash
[ -f "memory/constitution.md" ] && echo "EXISTS" || echo "MISSING"
```

### 1.2 If missing, create constitution

a. **Create /memory directory**:
   ```bash
   mkdir -p memory
   ```

b. **Ask user for key principles** (quick interview):

   ```markdown
   ## Quick Constitution Setup

   I'll create your project constitution. Answer these questions:

   ### Project Identity
   1. **Project name**: [wait for answer]
   2. **One-line description**: [wait for answer]

   ### Specification Principles (for all specs)
   3. **Accessibility**: WCAG level? (A/AA/AAA or "not applicable")
   4. **Performance**: Default thresholds? (e.g., "API < 500ms, page load < 3s")
   5. **Security**: Requirements? (e.g., "all data encrypted, auth required")

   ### Development Principles (how to build)
   6. **Testing**: Required approach? (e.g., "TDD", "tests required", "none")
   7. **Other principles**: Any other non-negotiables? (e.g., "library-first", "no magic")
   ```

c. **Generate constitution** from answers:

   Create `/memory/constitution.md` with the structure from the constitution template,
   filling in user answers. Mark sections as "Not applicable" if user skips them.

### 1.3 If exists, report and continue

```markdown
✓ Constitution already exists at /memory/constitution.md
  Version: {version}
  Last updated: {date}
```

**Skip if**: `--skip-constitution` flag provided

---

## Step 2: Bootstrap /docs

### 2.1 Detect project state

```bash
# Check for existing documentation sources
[ -d "docs" ] && echo "HAS_DOCS"
[ -d "specs" ] && echo "HAS_SPECS"
[ -f "README.md" ] && echo "HAS_README"
```

### 2.2 Determine bootstrap mode

| State | Mode | Action |
|-------|------|--------|
| No docs, no specs | `from-code` | Analyze codebase for domains |
| Has README/wiki | `from-docs` | Convert existing docs |
| Has specs/ | `from-specs` | Migrate legacy specs |
| User specified | Use that mode | Follow user preference |

### 2.3 Analyze and suggest domains

**If from-code**:
- Analyze route groups, module folders, entity clusters
- Suggest domain boundaries (auth, payments, dashboard, etc.)

**If from-docs**:
- Parse README sections
- Map sections to domains

**If from-specs**:
- Group specs/{feature}/ by inferred domain
- Consolidate into domain specs

### 2.4 Confirm with user

```markdown
## Suggested Domain Structure

| Domain | Evidence | Content |
|--------|----------|---------|
| {domain} | {why} | {what goes in} |

Accept? (yes/modify)
- Merge: "merge auth users"
- Split: "split payments billing"
- Rename: "rename auth identity"
```

### 2.5 Generate /docs structure

For each confirmed domain:

```bash
mkdir -p docs/{domain}
```

Create `/docs/{domain}/spec.md`:

```markdown
# {Domain} Specification

> Source of truth for {domain} functionality.
> Generated by /speckit.setup-bootstrap on {date}
> **Status**: Draft - needs review

## Overview

[Auto-extracted or needs description]

## Features

[Features will be added via /speckit.specify → /speckit.merge]

---

> **Next Steps**: Use /speckit.specify to add features to this domain
```

Create `/docs/README.md`:

```markdown
# Project Documentation

> Initialized by /speckit.setup-bootstrap on {date}

## Domains

| Domain | Description | Status |
|--------|-------------|--------|
| [{domain}]({domain}/spec.md) | {description} | Draft |

## Quick Links

- [Constitution](/memory/constitution.md)
- [Architecture Registry](/memory/architecture-registry.md)
```

---

## Step 3: Learn

### 3.1 Run /speckit.learn

Execute `/speckit.learn` to:
- Create/update `/memory/architecture-registry.md` (high-level patterns)
- Create `{module}/CLAUDE.md` files (local conventions)

**Skip if**: `--skip-learn` flag provided

---

## Completion Report

```markdown
## Bootstrap Complete

### Constitution
- Status: ✓ Created / Already exists
- Path: /memory/constitution.md

### Documentation Structure
- Domains created: {n}
  | Domain | Path |
  |--------|------|
  | {domain} | docs/{domain}/spec.md |

### Patterns (from learn)
- Architecture registry: ✓ Updated
- Module CLAUDE.md: {n} files created

### Next Steps
1. Review /memory/constitution.md - customize principles
2. Review /docs/{domain}/spec.md - add descriptions
3. Start first feature: /speckit.specify "your feature"
```
