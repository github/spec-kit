---
description: Initialize /docs domain structure from code, existing docs, or specs/
semantic_anchors:
  - Domain-Driven Design     # Bounded contexts, ubiquitous language
  - Living Documentation     # Docs evolve with the codebase
  - Code Archaeology         # Understanding existing systems through analysis
---

## User Input

```text
$ARGUMENTS
```

Options: `from-code`, `from-docs`, `from-specs`, or a specific source path.

## Purpose

Initialize the `/docs/{domain}/` structure for a project. This command handles:

1. **Greenfield**: No existing documentation → discover domains from code
2. **From existing docs**: README, wiki, markdown → convert to domain structure
3. **From spec-kit legacy**: `specs/{feature}/` → consolidate into domains

---

## Phase 1: Discovery

1. **Detect project state**:

   ```bash
   # Check for existing documentation sources
   [ -d "docs" ] && echo "HAS_DOCS"
   [ -d "specs" ] && echo "HAS_SPECS"
   [ -f "README.md" ] && echo "HAS_README"
   ```

2. **Determine mode** (auto or user-specified):

   | State | Mode | Action |
   |-------|------|--------|
   | No docs, no specs | `from-code` | Analyze codebase for domains |
   | Has README/wiki | `from-docs` | Convert existing docs |
   | Has specs/ | `from-specs` | Migrate legacy specs |
   | User specified | Use that mode | Follow user preference |

---

## Phase 2: Domain Discovery

3. **If from-code** (greenfield):

   - Analyze route groups, module folders, entity clusters
   - Suggest domain boundaries (auth, payments, dashboard, etc.)

4. **If from-docs**:

   - Parse README sections
   - Map sections to domains

5. **If from-specs**:

   - Group `specs/{feature}/` by inferred domain
   - Consolidate into domain specs

6. **Confirm with user**:

   ```markdown
   ## Suggested Domain Structure

   | Domain | Evidence | Content |
   |--------|----------|---------|
   | {domain} | {why} | {what goes in} |

   Accept? (yes/modify)
   - Merge: "merge auth users"
   - Split: "split payments billing"
   - Rename: "rename auth identity"
   ```

---

## Phase 3: Generate Structure

7. **Create /docs directories**:

   ```bash
   mkdir -p docs/{domain}
   ```

8. **Generate `/docs/{domain}/spec.md`** for each domain:

   ```markdown
   # {Domain} Specification

   > Source of truth for {domain} functionality.
   > Generated by /speckit.setup-docs on {date}
   > **Status**: Draft - needs review

   ## Overview

   [Auto-extracted or needs description]

   ## Features

   [Features will be added via /speckit.specify → /speckit.merge]

   ---

   > **Next Steps**: Use /speckit.specify to add features to this domain
   ```

9. **Generate `/docs/README.md`**:

   ```markdown
   # Project Documentation

   > Initialized by /speckit.setup-docs on {date}

   ## Domains

   | Domain | Description | Status |
   |--------|-------------|--------|
   | [{domain}]({domain}/spec.md) | {description} | Draft |

   ## Quick Links

   - [Constitution](/memory/constitution.md)
   - [Architecture Registry](/memory/architecture-registry.md)
   ```

---

## Completion Report

```markdown
## Docs Initialization Complete

### Domains Created
| Domain | Path | Source |
|--------|------|--------|
| {domain} | docs/{domain}/spec.md | {from-code/from-docs/from-specs} |

### Files Generated
- docs/README.md
- docs/{domain}/spec.md (× {n})

### Next Steps
1. Review generated domain specs
2. Complete [NEEDS DESCRIPTION] placeholders
3. Run /speckit.learn to extract patterns
4. Use /speckit.specify for new features
```
