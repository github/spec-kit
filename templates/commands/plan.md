---
description: プランテンプレートを使用してデザインアーティファクトを生成する実装計画ワークフローを実行します。
scripts:
  sh: scripts/bash/setup-plan.sh --json
  ps: scripts/powershell/setup-plan.ps1 -Json
---

ユーザー入力は、エージェントから直接提供されるか、コマンド引数として提供される場合があります - プロンプトに進む前に、（空でない場合は）**必ず**考慮してください。

ユーザー入力:

$ARGUMENTS

引数として提供された実装詳細に基づいて、以下を実行してください：

1. リポジトリルートから`{SCRIPT}`を実行し、FEATURE_SPEC、IMPL_PLAN、SPECS_DIR、BRANCHのJSONを解析します。今後のファイルパスはすべて絶対パスである必要があります。
2. 機能仕様を読み取り、分析して以下を理解します：
   - 機能要件とユーザーストーリー
   - 機能要件と非機能要件
   - 成功基準と受け入れ基準
   - 言及されている技術的制約や依存関係

3. `/memory/constitution.md`の憲章を読み、憲章要件を理解します。

4. 実装計画テンプレートを実行します：
   - `/templates/plan-template.md`を読み込みます（既にIMPL_PLANパスにコピー済み）
   - 入力パスをFEATURE_SPECに設定します
   - 実行フロー（メイン）機能のステップ1-9を実行します
   - テンプレートは自己完結型で実行可能です
   - 指定されたエラーハンドリングとゲートチェックに従います
   - テンプレートが$SPECS_DIR内のアーティファクト生成をガイドするようにします：
     * フェーズ0でresearch.mdを生成
     * フェーズ1でdata-model.md、contracts/、quickstart.mdを生成
     * フェーズ2でtasks.mdを生成
   - 引数からのユーザー提供の詳細をテクニカルコンテキストに組み込みます：{ARGS}
   - 各フェーズを完了するたびに進捗追跡を更新します

5. 実行完了を確認します：
   - 進捗追跡ですべてのフェーズが完了していることを確認します
   - すべての必要なアーティファクトが生成されたことを確認します
   - 実行中にERROR状態がないことを確認します

6. ブランチ名、ファイルパス、生成されたアーティファクトとともに結果を報告します。

パスの問題を避けるため、すべてのファイル操作にはリポジトリルートを含む絶対パスを使用してください。
