---
description: Generate SVG wireframes (dark theme) from a spec for visual validation before implementation.
handoffs:
  - label: Build Technical Plan
    agent: speckit.plan
    prompt: Create implementation plan for the visualized spec
  - label: Generate Light Theme
    agent: speckit.wireframe-light
    prompt: Generate light theme version of these wireframes
  - label: Clarify Requirements
    agent: speckit.clarify
    prompt: Refine spec requirements based on wireframe feedback
---

## User Input

```text
$ARGUMENTS
```

## Outline

Generate dark-themed SVG wireframes from a feature specification for visual validation before technical planning.

### 1. Identify the Spec

If `$ARGUMENTS` is provided, use it as the spec file path. Otherwise, look for the spec in the current feature's directory:

```bash
# Find spec.md in SPECS_DIR (set by speckit workflow) or detect from branch
ls specs/*/spec.md
```

Ask the user which spec to use if multiple exist, or use the only one if there's just one.

### 2. Read the Spec

**Use the Read tool** to read the full spec file. Extract and note:
- Feature name and purpose
- User stories and acceptance criteria
- UI requirements and interactions
- Any mentioned screens, forms, lists, or components
- Error states or edge cases mentioned

This is critical - wireframes must accurately reflect the spec requirements.

### 3. Plan the Wireframes

**CRITICAL RULES**:
1. **Every feature gets at least one wireframe** - no exceptions. If a feature exists, it gets visualized.
2. **The number of wireframes is determined by the spec content** - do NOT assume 1 feature = 1 SVG.
3. **Non-UI features still need wireframes** - use architecture diagrams, data flow diagrams, system diagrams, or process flows.

**Wireframe Types by Feature Category**:

| Feature Type | Wireframe Approach |
|--------------|-------------------|
| UI screens (forms, lists, dashboards) | Desktop + Mobile side-by-side layouts |
| Backend/infrastructure (RLS, APIs, auth) | Architecture diagrams showing components and data flow |
| Testing frameworks | Test flow diagrams, coverage dashboards |
| Integrations | System integration diagrams, API flow charts |
| Security features | Security architecture, threat model diagrams |
| Data features | Entity relationship diagrams, data flow visualizations |

**Determine how many wireframes based on spec content**:
- Count distinct user stories - each major flow may need its own wireframe
- Count distinct screens mentioned - each screen needs visualization
- Count distinct states (loading, error, empty, success) - consider separate wireframes for complex states
- Count distinct user roles - different views may need separate wireframes

**Common wireframe needs**:
- List views (showing multiple items)
- Detail views (showing single item)
- Forms (create/edit)
- Special states (empty, loading, error)
- Architecture/system diagrams (for non-UI features)
- Flow diagrams (for processes and integrations)

#### Determine Wireframe Strategy

Based on the spec complexity, choose the appropriate approach:

**Multi-Page** (create multiple SVG files):
- User flows with 3+ steps (auth, checkout, onboarding)
- State variations needing dedicated visualization (loading, error, empty, success)
- Different user roles with distinct views

**Naming conventions**:
| Scenario | Pattern | Example |
|----------|---------|---------|
| Sequential flow | `NN-step-name.svg` | `01-login.svg`, `02-register.svg` |
| State variations | `screen-state.svg` | `dashboard-empty.svg`, `dashboard-error.svg` |
| Role variations | `screen-role.svg` | `settings-admin.svg`, `settings-member.svg` |

**Expanded Canvas** (larger than 1400x800):
- Extensive annotations explaining complex interactions
- Flow arrows connecting multiple components
- Dense dashboards with many interconnected elements

**Canvas options**:
| Canvas | viewBox | Use case |
|--------|---------|----------|
| Standard | `0 0 1400 800` | Default for most screens |
| Wide | `0 0 1600 800` | Extra annotation margins (100px each side) |
| Tall | `0 0 1400 1000` | Complex vertical layouts |
| Extended | `0 0 1600 1000` | Full annotation mode |

Present your strategy recommendation to the user before generating.

### 4. Generate SVG Wireframes

Create SVG wireframes following the dark theme patterns.

**MANDATORY WATERMARK**: Every SVG file MUST include the generation header comment immediately after the opening `<svg>` tag. Replace placeholders:
- `[SPEC_FILE_PATH]` → actual spec file path (e.g., `specs/001-user-auth/spec.md`)
- `[YYYY-MM-DD]` → current date

This watermark enables verification in future sessions via:
```bash
grep -r "GENERATED BY: /speckit.wireframe" specs/*/wireframes/
```

**File location**: Create a `wireframes/` subdirectory within the feature's spec directory:
```
specs/[###-feature-name]/wireframes/
```

Create the directory if it doesn't exist:
```bash
mkdir -p specs/[feature-name]/wireframes
```

**Side-by-Side Layout Template** (Desktop left, Mobile right):
```xml
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 800" width="1400" height="800">
  <!-- ============================================================
       GENERATED BY: /speckit.wireframe
       SOURCE: [SPEC_FILE_PATH]
       DATE: [YYYY-MM-DD]
       DO NOT MANUALLY EDIT - Regenerate with /speckit.wireframe command
       ============================================================ -->
  <defs>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
    <linearGradient id="accentGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#d946ef"/>
    </linearGradient>
    <style>
      /* Typography - use these classes, not inline sizes */
      .heading-lg { fill: #ffffff; font-family: system-ui, sans-serif; font-size: 20px; font-weight: bold; }
      .heading { fill: #ffffff; font-family: system-ui, sans-serif; font-size: 14px; font-weight: bold; }
      .text-md { fill: #cbd5e1; font-family: system-ui, sans-serif; font-size: 12px; }
      .text-sm { fill: #94a3b8; font-family: system-ui, sans-serif; font-size: 10px; }
      .text-muted { fill: #64748b; font-family: system-ui, sans-serif; font-size: 10px; }
      .annotation { fill: #8b5cf6; font-family: monospace; font-size: 10px; }
      /* Layout labels */
      .label-desktop { fill: #8b5cf6; font-family: monospace; font-size: 11px; font-weight: bold; }
      .label-mobile { fill: #d946ef; font-family: monospace; font-size: 11px; font-weight: bold; }
    </style>
  </defs>

  <!-- Background -->
  <rect width="1400" height="800" fill="url(#bgGrad)"/>

  <!-- Dot grid pattern -->
  <g opacity="0.05">
    <pattern id="dots" width="30" height="30" patternUnits="userSpaceOnUse">
      <circle cx="15" cy="15" r="1" fill="#fff"/>
    </pattern>
    <rect width="1400" height="800" fill="url(#dots)"/>
  </g>

  <!-- Accent line top -->
  <rect x="0" y="0" width="1400" height="3" fill="url(#accentGrad)"/>

  <!-- Title -->
  <text x="700" y="28" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#64748b" letter-spacing="1">WIREFRAME TITLE</text>

  <!-- DESKTOP SECTION (left) -->
  <text x="40" y="52" class="label-desktop">DESKTOP</text>
  <g id="desktop-view">
    <!-- Desktop area: x=40, y=60, width=900, height=680 -->
    <!-- 3-column layout: sidebar 200px | main 440px | detail 240px (10px gaps) -->
    <!-- Header: x=40, y=60, width=900, height=50 -->
    <!-- Sidebar: x=40, y=120, width=200 -->
    <!-- Main: x=250, y=120, width=440 -->
    <!-- Detail: x=700, y=120, width=240 -->
  </g>

  <!-- MOBILE SECTION (right) -->
  <text x="980" y="52" class="label-mobile">MOBILE</text>
  <g id="mobile-view" transform="translate(980, 60)">
    <!-- Phone frame: 360x700, rx=24 -->
    <rect x="0" y="0" width="360" height="700" rx="24" fill="#1e293b" stroke="#475569" stroke-width="2"/>
    <!-- Screen area: x=10, y=10, width=340, height=680, rx=16 -->
    <rect x="10" y="10" width="340" height="680" rx="16" fill="#0f172a"/>
    <!-- Status bar -->
    <rect x="10" y="10" width="340" height="28" rx="16" fill="#1e293b"/>
    <text x="30" y="28" class="text-sm">9:41</text>
    <!-- Mobile content starts at y=48 within this group -->
  </g>
</svg>
```

**Layout Dimensions**:
| Section | Position | Size | Notes |
|---------|----------|------|-------|
| Desktop area | x=40, y=60 | 900×680 | 3-column layout |
| - Sidebar | x=40 | 200px wide | Navigation |
| - Main | x=250 | 440px wide | Primary content |
| - Detail | x=700 | 240px wide | Item details |
| - Gaps | | 10px | Between columns |
| Mobile area | x=980, y=60 | 360×700 | Phone frame |
| - Content | x=990, y=70 | 340×660 | 10px padding |

**Component Sizing Standards** (use consistently):
| Component | Desktop | Mobile | rx |
|-----------|---------|--------|-----|
| Primary button | 100×36 | 80×32 | 6 |
| Icon button | 40×40 | 36×36 | 6 |
| FAB | r=28 | r=24 | circle |
| Text input | height=36 | height=32 | 6 |
| Card | - | - | 8 |
| List item | - | - | 6 |
| Badge (pill) | height=22 | height=20 | 11 |
| Avatar large | r=24 | r=20 | circle |
| Avatar small | r=16 | r=14 | circle |

**Dark Theme Color Palette**:
- Background: gradient `#0f172a` → `#1e293b`
- Primary: `#8b5cf6` (violet)
- Accent: `#d946ef` (fuchsia)
- Panels: `#1e293b`, `#334155`
- Borders: `#475569`
- Text: `#fff` (headings), `#94a3b8`/`#cbd5e1` (body), `#64748b` (muted)
- Success: `#22c55e`, Warning: `#eab308`, Error: `#ef4444`

**Design Guidelines**:
- Include annotation boxes to explain UI elements
- Show realistic placeholder data (not "Lorem ipsum")
- Use the sizing standards above for consistent component dimensions

#### Multi-Page Flow Guidelines

When creating multi-page wireframes:
1. **Maintain consistency** - Same header/nav structure, colors, typography across all files
2. **Add flow indicators** - Progress bars, step numbers, "Back"/"Next" button states
3. **Include transition notes** - Annotate what action triggers navigation to next screen

#### Wide Canvas Template (1600x800)

For extra annotation space, use this adjusted layout:

```xml
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1600 800" width="1600" height="800">
  <!-- ============================================================
       GENERATED BY: /speckit.wireframe
       SOURCE: [SPEC_FILE_PATH]
       DATE: [YYYY-MM-DD]
       DO NOT MANUALLY EDIT - Regenerate with /speckit.wireframe command
       ============================================================ -->
```

**Adjusted positions for 1600 wide**:
| Section | Standard (1400) | Wide (1600) |
|---------|-----------------|-------------|
| Desktop area | x=40 | x=140 |
| Mobile area | x=980 | x=1080 |
| Left annotation strip | N/A | x=20, width=100 |
| Right annotation strip | N/A | x=1480, width=100 |

**Margin-to-View Mapping:**
| Margin | Annotates | Target coordinates |
|--------|-----------|-------------------|
| Left (x=20) | **Desktop** elements | x2 in range 140-940 |
| Right (x=1480) | **Mobile** elements | x2 in range 1080-1440 |

Leader lines should connect annotations to their **adjacent** view, not reach across the screen.

#### Annotation Callout Template

```xml
<!-- Annotation box (place in margin area) -->
<g class="annotation-box">
  <rect x="20" y="130" width="100" height="45" rx="4" fill="#1e293b" stroke="#8b5cf6" stroke-width="1"/>
  <text x="70" y="148" text-anchor="middle" class="annotation">onClick</text>
  <text x="70" y="165" text-anchor="middle" class="text-muted">→ /api/submit</text>
</g>
<!-- NOTE: Add leader line to the leader-lines group at end of SVG -->
```

#### Annotation Vertical Ordering (Prevent Crossing Lines)

**Critical**: Order annotations in the margin to match the vertical position of their targets in the view. This prevents leader lines from crossing each other.

**Process**:
1. **List target elements** with their y-coordinates in the view
2. **Sort by y-coordinate** (top to bottom)
3. **Place annotations** in the margin in the same top-to-bottom order

**Example** - Annotating a mobile view with 3 elements:

| Target Element | Target Y | Annotation Y (margin) |
|----------------|----------|----------------------|
| Header | y=70 | y=100 (top) |
| Form fields | y=200 | y=200 (middle) |
| Submit button | y=400 | y=320 (bottom) |

**Wrong** (causes crossing):
```
Margin          Mobile View
┌─────┐         ┌─────────┐
│ A3  │───┐  ┌──│ Target1 │  ← A3 points UP (crosses A1, A2)
├─────┤   │  │  ├─────────┤
│ A1  │───┼──┘  │ Target2 │  ← A1 crosses A3
├─────┤   │     ├─────────┤
│ A2  │───┴─────│ Target3 │
└─────┘         └─────────┘
```

**Correct** (no crossing):
```
Margin          Mobile View
┌─────┐         ┌─────────┐
│ A1  │─────────│ Target1 │  ← Horizontal or slight angle
├─────┤         ├─────────┤
│ A2  │─────────│ Target2 │  ← Parallel lines
├─────┤         ├─────────┤
│ A3  │─────────│ Target3 │  ← No crossing
└─────┘         └─────────┘
```

**Spacing guideline**: Space annotation boxes ~80-120px apart vertically in the margin.

**Leader Line Coordinate Calculation**:

Leader lines MUST precisely connect annotations to their target elements. Calculate exact coordinates:

1. **Find the target element's position** - Note its x, y, width, height from the SVG
2. **Calculate the connection point** on the target:
   - Left edge: `x1 = target.x`
   - Right edge: `x1 = target.x + target.width`
   - Top edge: `y1 = target.y`
   - Center: `x1 = target.x + target.width/2`, `y1 = target.y + target.height/2`
3. **Set line endpoint (x2, y2)** at the annotation box edge facing the target

Example - Annotating a button at x=300, y=200, width=100, height=36:
```xml
<!-- Target: Button at (300, 200) size 100x36 -->
<!-- Annotation box at left margin -->
<g class="annotation-box">
  <rect x="20" y="200" width="100" height="36" rx="4" fill="#1e293b" stroke="#8b5cf6" stroke-width="1"/>
  <text x="70" y="222" text-anchor="middle" class="annotation">SUBMIT BTN</text>
</g>
<!-- Add to leader-lines group: x1=120 (box right edge), y1=218, x2=300 (button left edge), y2=218 -->
```

For diagonal lines, ensure the endpoint lands ON the target element, not near it.

#### SVG Draw Order

**Important**: In SVG, elements render in document order - later elements appear on top.

When using annotations with leader lines:
1. Place annotation boxes (rectangles + text) in the margin areas
2. Place all `<line>` elements in a dedicated group at the END of the SVG

This ensures leader lines are always visible, even when crossing over form elements or other content.

#### Leader Lines Group Template

Place all leader lines in a dedicated group at the END of the SVG, just before `</svg>`:

```xml
<!-- Leader lines (drawn last to appear on top of all content) -->
<g id="leader-lines">
  <!-- Left margin annotation lines -->
  <line x1="120" y1="150" x2="180" y2="200" stroke="#8b5cf6" stroke-width="1" stroke-dasharray="4,2"/>
  <line x1="120" y1="250" x2="200" y2="280" stroke="#8b5cf6" stroke-width="1" stroke-dasharray="4,2"/>

  <!-- Right margin annotation lines -->
  <line x1="1480" y1="150" x2="1380" y2="200" stroke="#22c55e" stroke-width="1" stroke-dasharray="4,2"/>
</g>
</svg>
```

**Key points:**
- Use absolute coordinates (not relative to transform groups)
- Group related lines with comments (left margin, right margin)
- This group must be the LAST element before `</svg>`

#### State Variation Indicators

| State | Visual treatment |
|-------|------------------|
| Loading | Skeleton placeholders, animated spinner, disabled buttons |
| Empty | Illustration placeholder, "No items" message, CTA |
| Error | Red accent border, error icon, retry button |
| Success | Green accent, checkmark icon, confirmation message |

**Animated Loading Spinner Template**:

Use SVG `<animateTransform>` for smooth rotation animation:

```xml
<!-- Animated loading spinner - place at desired position -->
<g transform="translate(CENTER_X, CENTER_Y)">
  <!-- Track circle (background) -->
  <circle cx="0" cy="0" r="12" fill="none" stroke="#334155" stroke-width="2"/>
  <!-- Spinning arc -->
  <path d="M 0 -12 A 12 12 0 0 1 12 0" fill="none" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round">
    <animateTransform
      attributeName="transform"
      type="rotate"
      from="0"
      to="360"
      dur="1s"
      repeatCount="indefinite"/>
  </path>
</g>
```

**Spinner sizes** (adjust r and path d values):
| Size | Radius | Path d |
|------|--------|--------|
| Small | r=8 | `M 0 -8 A 8 8 0 0 1 8 0` |
| Medium | r=12 | `M 0 -12 A 12 12 0 0 1 12 0` |
| Large | r=20 | `M 0 -20 A 20 20 0 0 1 20 0` |

The path draws a quarter arc. For a half-arc spinner, use:
```xml
<path d="M 0 -12 A 12 12 0 1 1 0 12" .../>
```

### 5. Verify

After creating the wireframes:
1. List the created SVG files in `specs/[feature-name]/wireframes/`
2. Confirm files can be opened in a browser for visual review
3. Ready for stakeholder review before proceeding to `/speckit.plan`

## Workflow Integration

```
/speckit.specify → /speckit.clarify → /speckit.wireframe → [REVIEW] → /speckit.plan
```

Wireframes provide a visual checkpoint for stakeholder approval before investing in technical planning and implementation.

## Example

For a spec about "User Profile" feature in `specs/001-user-profile/`:

1. Create folder: `specs/001-user-profile/wireframes/`
2. Generate:
   - `profile-view.svg` - View profile page
   - `profile-edit.svg` - Edit profile form
3. Review wireframes with stakeholders
4. Proceed to `/speckit.plan` when approved
