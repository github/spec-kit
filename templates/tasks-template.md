---

description: "任务列表模板，用于实现功能"
---

# 任务列表: [功能名称]

**输入**: 设计文档从 `/specs/[###-feature-name]/`
**先决条件**: plan.md (必填), spec.md (如果有用户故事则必填), research.md, data-model.md, contracts/

**测试**: 下面的示例包括测试任务。测试是可选的(只有在功能规格中有明确要求时才包括)。

**组织**: 任务按用户故事分组，以实现每个故事的独立实现和测试。

## 格式: `[ID] [P?] [Story] 描述`

- **[P]**: 可以并行运行 (不同文件, 无依赖)
- **[Story]**: 属于哪个用户故事 (例如: US1, US2, US3等)
- 描述中包含精确的相对文件路径

## 路径约定

- **单项目**: `src/`, `tests/` 在存储库根目录
- **Web 应用**: `backend/src/`, `frontend/src/`
- **移动应用**: `api/src/`, `ios/src/` 或 `android/src/`
- 下面显示的路径假设是单项目(根据 plan.md 结构调整)

<!-- 
  ============================================================================
  重要提示: 下面的任务仅为示例，仅用于说明目的。
  
  /speckit.tasks 命令 必须 基于以下内容替换这些任务:
  - spec.md 中的用户故事 (包括其优先级 P1, P2, P3...)
  - plan.md 中的功能需求
  - data-model.md 中的实体
  - contracts/ 中的端点
  
  任务必须按用户故事组织，以便每个故事都可以:
  - 独立实现
  - 独立测试
  - 作为 MVP 增量交付
  
  不要将这些示例任务保留在生成的 tasks.md 文件中。
  ============================================================================
-->

## 阶段 1: 设置 (共享基础设施)

**目的**: 项目初始化和基本结构

- [ ] T001 创建项目结构，根据每个实现计划
- [ ] T002 初始化 [语言] 项目，包含 [框架] 依赖项
- [ ] T003 [P] 配置代码质量工具 (例如: 代码格式化, 静态分析)

---

## 阶段 2: 基础架构 (阻塞先决条件)

**目的**: 核心基础设施，必须在任何用户故事实现之前完成

**⚠️ 关键**: 任何用户故事实现之前，必须完成此阶段

基础任务示例（请根据你的项目进行调整）：

- [ ] T004 设置数据库模式和迁移框架
- [ ] T005 [P] 实现认证/授权框架
- [ ] T006 [P] 设置 API 路由和中间件结构
- [ ] T007 创建所有故事依赖的基础模型/实体
- [ ] T008 配置错误处理和日志记录基础设施
- [ ] T009 设置环境配置管理

**检查项**: 基础架构就绪(可以并行实现用户故事)

---

## 阶段 3: 用户故事 1 - [标题] (Priority: P1) 🎯 MVP

**目标**: [简要描述该用户故事交付的功能]

**独立测试**: [如何验证该用户故事在独立运行时是否正常工作]

### 测试用户故事 1 (可选 - 仅当请求测试时) ⚠️

> **注意: 这些测试必须在实现之前编写，确保在实现用户故事之前就能快速失败**

- [ ] T010 [P] [US1] 合同测试 [endpoint] 在 tests/contract/test_[name].py 中
- [ ] T011 [P] [US1] 集成测试 [用户旅程] 在 tests/integration/test_[name].py 中 

### 实现用户故事 1

- [ ] T012 [P] [US1] 创建 [Entity1] 模型在 src/models/[entity1].py 中
- [ ] T013 [P] [US1] 创建 [Entity2] 模型在 src/models/[entity2].py 中
- [ ] T014 [US1] 实现 [Service] 在 src/services/[service].py 中 (依赖 T012, T013)
- [ ] T015 [US1] 实现 [endpoint/feature] 在 src/[location]/[file].py 中
- [ ] T016 [US1] 添加验证和错误处理
- [ ] T017 [US1] 添加用户故事 1 操作的日志记录

**检查项**: 此时，用户故事 1 应该是完全功能的，并且可以独立测试

---

## 阶段 4: 用户故事 2 - [标题] (Priority: P2)

**目标**: [简要描述该用户故事交付的功能]

**独立测试**: [如何验证该用户故事在独立运行时是否正常工作]

### 测试用户故事 2 (可选 - 仅当请求测试时) ⚠️

- [ ] T018 [P] [US2] 合同测试 [endpoint] 在 tests/contract/test_[name].py 中
- [ ] T019 [P] [US2] 集成测试 [用户旅程] 在 tests/integration/test_[name].py 中 

### 实现用户故事 2

- [ ] T020 [P] [US2] 创建 [Entity] 模型在 src/models/[entity].py 中
- [ ] T021 [US2] 实现 [Service] 在 src/services/[service].py 中
- [ ] T022 [US2] 实现 [endpoint/feature] 在 src/[location]/[file].py 中
- [ ] T023 [US2] 与用户故事 1 组件集成 (如果需要)

**检查项**: 此时，用户故事 1 和用户故事 2 都应能够独立运行

---

## 阶段 5: 用户故事 3 - [标题] (Priority: P3)

**目标**: [简要描述该用户故事交付的功能]

**独立测试**: [如何验证该用户故事在独立运行时是否正常工作]

### 测试用户故事 3 (可选 - 仅当请求测试时) ⚠️

- [ ] T024 [P] [US3] 合同测试 [endpoint] 在 tests/contract/test_[name].py 中
- [ ] T025 [P] [US3] 集成测试 [用户旅程] 在 tests/integration/test_[name].py 中 

### 实现用户故事 3

- [ ] T026 [P] [US3] 创建 [Entity] 模型在 src/models/[entity].py 中
- [ ] T027 [US3] 实现 [Service] 在 src/services/[service].py 中
- [ ] T028 [US3] 实现 [endpoint/feature] 在 src/[location]/[file].py 中

**检查项**: 此时，所有用户故事都应能够独立运行

---

[根据需要，按照相同模式添加更多用户故事阶段]

---

## 阶段 N: 完善与横切关注点

**目的**: 影响多个用户故事的改进

- [ ] TXXX [P] 文档更新在 docs/ 中
- [ ] TXXX 代码清理和重构
- [ ] TXXX 所有用户故事的性能优化
- [ ] TXXX [P] 额外的单元测试 (如果请求) 在 tests/unit/ 中
- [ ] TXXX 安全加固
- [ ] TXXX 运行 quickstart.md 验证

---

## 依赖与执行顺序

### 阶段依赖关系

- **设置（阶段 1）**：无依赖项 - 可立即开始
- **基础架构（阶段 2）**：依赖设置阶段完成 - 阻塞所有用户故事
- **用户故事（阶段 3+）**：均依赖基础架构阶段完成
  - 用户故事随后可并行推进（若有人手）
  - 或按优先级顺序串行推进（P1 → P2 → P3）
- **完善（最终阶段）**：依赖所有期望用户故事完成

### 用户故事依赖关系

- **用户故事 1 (P1)**: 可在基础架构（阶段 2）完成后启动 - 不依赖其他故事
- **用户故事 2 (P2)**: 可在基础架构（阶段 2）完成后启动 - 可与 US1 集成，但应可独立测试
- **用户故事 3 (P3)**: 可在基础架构（阶段 2）完成后启动 - 可与 US1/US2 集成，但应可独立测试

### 在每个用户故事内部

- 如果包含测试，测试必须在实现前编写并**失败**
- 先模型，后服务
- 先服务，后端点
- 先核心实现，后集成
- 完成当前故事后再进入下一个优先级

### 并行机会

- 所有标记为 [P] 的设置任务可并行执行
- 所有标记为 [P] 的基础任务可在阶段 2 内并行执行
- 一旦基础阶段完成，所有用户故事可并行启动（若团队人力允许）
- 同一用户故事中标记为 [P] 的所有测试可并行执行
- 同一故事中标记为 [P] 的模型可并行创建
- 不同用户故事可由不同团队成员并行推进

---

## 并行示例：用户故事 1

```bash
# Launch all tests for User Story 1 together (if tests requested):
Task: "Contract test for [endpoint] in tests/contract/test_[name].py"
Task: "Integration test for [user journey] in tests/integration/test_[name].py"

# Launch all models for User Story 1 together:
Task: "Create [Entity1] model in src/models/[entity1].py"
Task: "Create [Entity2] model in src/models/[entity2].py"
```

---

## 实现策略

### MVP 优先（仅用户故事 1）

1. 完成阶段 1：设置
2. 完成阶段 2：基础架构（关键 - 阻塞所有故事）
3. 完成阶段 3：用户故事 1
4. **停止并验证**：独立测试用户故事 1
5. 如果准备好，部署/演示

### 增量交付

1. 完成设置 + 基础架构 → 基础架构就绪
2. 添加用户故事 1 → 独立测试 → 部署/演示（MVP！）
3. 添加用户故事 2 → 独立测试 → 部署/演示
4. 添加用户故事 3 → 独立测试 → 部署/演示
5. 每个用户故事都添加了价值，而不会破坏之前的用户故事

### 并行团队策略

如果有多个开发人员：

1. 团队完成设置 + 基础架构一起
2. 一旦基础架构完成：
   - Developer A: User Story 1
   - Developer B: User Story 2
   - Developer C: User Story 3
3. 所有用户故事完成并独立集成

---

## 注意事项

- [P] 任务 = 不同文件，无依赖
- [Story] 标签将任务映射到特定用户故事以便追踪
- 每个用户故事都应可独立完成和测试
- 在实现之前先验证测试失败
- 每个任务或逻辑组完成后提交
- 在任何检查点停下来独立验证故事
- 避免：模糊任务、同一文件冲突、破坏独立性的跨故事依赖
